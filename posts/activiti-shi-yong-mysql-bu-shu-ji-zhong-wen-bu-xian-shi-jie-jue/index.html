<!DOCTYPE html>
<html lang="zh">

<head>
<meta charset="utf-8" />
<meta name="author" content="pocoyo" />
<meta name="description" content="Personal blog." />
<meta name="keywords" content="blog, tech" />
<meta name="google-site-verification" content="k8WIOcecDRQPeZ2x500693x2f2W85xDEm87gV1_lWl0" />
<meta name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
<meta name="generator" content="Hugo 0.62.2" />

<link rel="canonical" href="/posts/activiti-shi-yong-mysql-bu-shu-ji-zhong-wen-bu-xian-shi-jie-jue/">
<link rel="icon" href="https://emacle.github.io/favicon.ico">
<meta property="og:title" content="activiti使用mysql部署及中文不显示解决" />
<meta property="og:description" content="官网下载 activiti-6.0.0.zip 包解压 将wars/目录下 activiti-app.war, activiti-rest.war 包放入apache-tomcat-9.0.30/webapps目录下  apache-tomcat-9.0.30/bin/catalina.bat start # 启动 tomcat，stop自动解压war包并布署，webapps/ 下生成两个目录 activiti-app/ , activity-rest/
 activiti-app 会创建用户 admin 密码 test activiti-rest 会创建用户 fozzie gonzo kermit 密码同用户名 测试activiti-app http://localhost:8080/activiti-app/ admin:test 测试activiti-rest http://localhost:8080/activiti-rest/docs/ swagger文档 kermit:kermit http://kermit:kermit@localhost:8080/activiti-rest/service/management/engine 必须使用用户名密码进行 basic auth  默认使用H2内存数据库，数据不能持久化，mysql库替换，这里使用的mysql库是v8.0.12
  新建数据库名 activiti6ui
  下载相应mysql-connector-java-8.0.12.jar包放入apache-tomcat-9.0.30/lib/, 重命名mysql-connector-java.jar 可选
  activiti-app修改mysql连接配置
cat apache-tomcat-9.0.30\webapps\activiti-app\WEB-INF\classes\META-INF\activiti-app\activiti-app.properties
datasource.driver=com.mysql.jdbc.Driverdatasource.url=jdbc:mysql://127.0.0.1:3306/activiti6ui?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;autoReconnect=true&amp;failOverReadOnly=false&amp;serverTimezone=GMT%2B8&amp;nullCatalogMeansCurrent=truedatasource.username=rootdatasource.password=roothibernate.dialect=org.hibernate.dialect.MySQLDialect注意: &amp;nullCatalogMeansCurrent=true参数 必须是要带的，否则创建表时会出错 大坑
  activiti-rest修改mysql连接配置" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/posts/activiti-shi-yong-mysql-bu-shu-ji-zhong-wen-bu-xian-shi-jie-jue/" />
<meta property="article:published_time" content="2020-05-05T21:55:00+08:00" />
<meta property="article:modified_time" content="2020-05-05T21:55:00+08:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="activiti使用mysql部署及中文不显示解决"/>
<meta name="twitter:description" content="官网下载 activiti-6.0.0.zip 包解压 将wars/目录下 activiti-app.war, activiti-rest.war 包放入apache-tomcat-9.0.30/webapps目录下  apache-tomcat-9.0.30/bin/catalina.bat start # 启动 tomcat，stop自动解压war包并布署，webapps/ 下生成两个目录 activiti-app/ , activity-rest/
 activiti-app 会创建用户 admin 密码 test activiti-rest 会创建用户 fozzie gonzo kermit 密码同用户名 测试activiti-app http://localhost:8080/activiti-app/ admin:test 测试activiti-rest http://localhost:8080/activiti-rest/docs/ swagger文档 kermit:kermit http://kermit:kermit@localhost:8080/activiti-rest/service/management/engine 必须使用用户名密码进行 basic auth  默认使用H2内存数据库，数据不能持久化，mysql库替换，这里使用的mysql库是v8.0.12
  新建数据库名 activiti6ui
  下载相应mysql-connector-java-8.0.12.jar包放入apache-tomcat-9.0.30/lib/, 重命名mysql-connector-java.jar 可选
  activiti-app修改mysql连接配置
cat apache-tomcat-9.0.30\webapps\activiti-app\WEB-INF\classes\META-INF\activiti-app\activiti-app.properties
datasource.driver=com.mysql.jdbc.Driverdatasource.url=jdbc:mysql://127.0.0.1:3306/activiti6ui?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;autoReconnect=true&amp;failOverReadOnly=false&amp;serverTimezone=GMT%2B8&amp;nullCatalogMeansCurrent=truedatasource.username=rootdatasource.password=roothibernate.dialect=org.hibernate.dialect.MySQLDialect注意: &amp;nullCatalogMeansCurrent=true参数 必须是要带的，否则创建表时会出错 大坑
  activiti-rest修改mysql连接配置"/>


<meta itemprop="name" content="activiti使用mysql部署及中文不显示解决">
<meta itemprop="description" content="官网下载 activiti-6.0.0.zip 包解压 将wars/目录下 activiti-app.war, activiti-rest.war 包放入apache-tomcat-9.0.30/webapps目录下  apache-tomcat-9.0.30/bin/catalina.bat start # 启动 tomcat，stop自动解压war包并布署，webapps/ 下生成两个目录 activiti-app/ , activity-rest/
 activiti-app 会创建用户 admin 密码 test activiti-rest 会创建用户 fozzie gonzo kermit 密码同用户名 测试activiti-app http://localhost:8080/activiti-app/ admin:test 测试activiti-rest http://localhost:8080/activiti-rest/docs/ swagger文档 kermit:kermit http://kermit:kermit@localhost:8080/activiti-rest/service/management/engine 必须使用用户名密码进行 basic auth  默认使用H2内存数据库，数据不能持久化，mysql库替换，这里使用的mysql库是v8.0.12
  新建数据库名 activiti6ui
  下载相应mysql-connector-java-8.0.12.jar包放入apache-tomcat-9.0.30/lib/, 重命名mysql-connector-java.jar 可选
  activiti-app修改mysql连接配置
cat apache-tomcat-9.0.30\webapps\activiti-app\WEB-INF\classes\META-INF\activiti-app\activiti-app.properties
datasource.driver=com.mysql.jdbc.Driverdatasource.url=jdbc:mysql://127.0.0.1:3306/activiti6ui?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;autoReconnect=true&amp;failOverReadOnly=false&amp;serverTimezone=GMT%2B8&amp;nullCatalogMeansCurrent=truedatasource.username=rootdatasource.password=roothibernate.dialect=org.hibernate.dialect.MySQLDialect注意: &amp;nullCatalogMeansCurrent=true参数 必须是要带的，否则创建表时会出错 大坑
  activiti-rest修改mysql连接配置">
<meta itemprop="datePublished" content="2020-05-05T21:55:00&#43;08:00" />
<meta itemprop="dateModified" content="2020-05-05T21:55:00&#43;08:00" />
<meta itemprop="wordCount" content="84">



<meta itemprop="keywords" content="activiti," />

<link rel="stylesheet" href="/css/layout.css" />


<link rel="stylesheet" href="/css/default-dark.css" />




<title>


     activiti使用mysql部署及中文不显示解决 

</title>

</head>


<body>
<div class="main">
<header>

<div class="header-bar">

  <nav>
    <div class="siteTitle">
      <a href="/">~振鹭于飞~</a>
    </div> 

    
    
    <a class="nav-item" href="/posts/"><div class="nav-item-title">Posts</div></a>
    
    <a class="nav-item" href="/tags/"><div class="nav-item-title">Tags</div></a>
    

  </nav>

  
<div class="social-links-header">

  

  
  <a href="https://github.com/emacle" target="_blank"><div class="social-link">gh</div></a>
  

  

  

  

</div>


</div>


</header>


<article class="post">
    <h1 class="title"> activiti使用mysql部署及中文不显示解决 </h1>
    <div class="content"> <ol>
<li>官网下载 activiti-6.0.0.zip 包解压</li>
<li>将wars/目录下 <code>activiti-app.war</code>, <code>activiti-rest.war</code> 包放入apache-tomcat-9.0.30/webapps目录下</li>
</ol>
<div class="highlight"><pre style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-text" data-lang="text">apache-tomcat-9.0.30/bin/catalina.bat start   # 启动 tomcat，stop
</code></pre></div><p>自动解压war包并布署，webapps/ 下生成两个目录 <code>activiti-app/</code> , <code>activity-rest/</code></p>
<ol>
<li><code>activiti-app</code> 会创建用户 admin 密码 test</li>
<li><code>activiti-rest</code> 会创建用户 fozzie gonzo kermit 密码同用户名</li>
<li>测试activiti-app <a href="http://localhost:8080/activiti-app/">http://localhost:8080/activiti-app/</a>  admin:test</li>
<li>测试activiti-rest <a href="http://localhost:8080/activiti-rest/docs/">http://localhost:8080/activiti-rest/docs/</a> swagger文档 kermit:kermit
<a href="http://kermit:kermit@localhost:8080/activiti-rest/service/management/engine">http://kermit:kermit@localhost:8080/activiti-rest/service/management/engine</a> 必须使用用户名密码进行 basic auth</li>
</ol>
<p>默认使用H2内存数据库，数据不能持久化，mysql库替换，这里使用的mysql库是v8.0.12</p>
<ol>
<li>
<p>新建数据库名 <code>activiti6ui</code></p>
</li>
<li>
<p>下载相应mysql-connector-java-8.0.12.jar包放入apache-tomcat-9.0.30/lib/, 重命名mysql-connector-java.jar 可选</p>
</li>
<li>
<p>activiti-app修改mysql连接配置</p>
<p>cat apache-tomcat-9.0.30\webapps\activiti-app\WEB-INF\classes\META-INF\activiti-app\activiti-app.properties</p>
<div class="highlight"><pre style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">datasource.driver<span style="color:#5bc4bf">=</span>com.mysql.jdbc.Driver
datasource.url<span style="color:#5bc4bf">=</span>jdbc:mysql://127.0.0.1:3306/activiti6ui?useUnicode<span style="color:#5bc4bf">=</span>true&amp;<span style="color:#ef6155">characterEncoding</span><span style="color:#5bc4bf">=</span>UTF-8&amp;<span style="color:#ef6155">useSSL</span><span style="color:#5bc4bf">=</span>false&amp;<span style="color:#ef6155">autoReconnect</span><span style="color:#5bc4bf">=</span>true&amp;<span style="color:#ef6155">failOverReadOnly</span><span style="color:#5bc4bf">=</span>false&amp;<span style="color:#ef6155">serverTimezone</span><span style="color:#5bc4bf">=</span>GMT%2B8&amp;<span style="color:#ef6155">nullCatalogMeansCurrent</span><span style="color:#5bc4bf">=</span>true
datasource.username<span style="color:#5bc4bf">=</span>root
datasource.password<span style="color:#5bc4bf">=</span>root
hibernate.dialect<span style="color:#5bc4bf">=</span>org.hibernate.dialect.MySQLDialect
</code></pre></div><p>注意:  <!-- raw HTML omitted -->&amp;nullCatalogMeansCurrent=true<!-- raw HTML omitted --> 参数 必须是要带的，否则创建表时会出错 大坑</p>
</li>
<li>
<p>activiti-rest修改mysql连接配置</p>
<p>cat apache-tomcat-9.0.30\webapps\activiti-rest\WEB-INF\classes\db.properties</p>
<div class="highlight"><pre style="color:#e7e9db;background-color:#2f1e2e;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#ef6155">db</span><span style="color:#5bc4bf">=</span>mysql
jdbc.driver<span style="color:#5bc4bf">=</span>com.mysql.jdbc.Driver
jdbc.url<span style="color:#5bc4bf">=</span>jdbc:mysql://127.0.0.1:3306/activiti6ui?useUnicode<span style="color:#5bc4bf">=</span>true&amp;<span style="color:#ef6155">characterEncoding</span><span style="color:#5bc4bf">=</span>UTF-8&amp;<span style="color:#ef6155">useSSL</span><span style="color:#5bc4bf">=</span>false&amp;<span style="color:#ef6155">autoReconnect</span><span style="color:#5bc4bf">=</span>true&amp;<span style="color:#ef6155">failOverReadOnly</span><span style="color:#5bc4bf">=</span>false&amp;<span style="color:#ef6155">serverTimezone</span><span style="color:#5bc4bf">=</span>GMT%2B8&amp;<span style="color:#ef6155">nullCatalogMeansCurrent</span><span style="color:#5bc4bf">=</span>true
jdbc.username<span style="color:#5bc4bf">=</span>root
jdbc.password<span style="color:#5bc4bf">=</span>root
</code></pre></div></li>
</ol>
<p>重启 tomcat 部署war包的时候，如果有对应的表则会更新，否则会自动创建所有结构及数据</p>
<p><code>activiti-app</code> 里显示流程图中文显示正常， <code>activiti-rest</code> 使用 &lsquo;runtime/process-instances/{processInstanceId}/diagram&rsquo;
接口获取流程图状态的时候，中文显示为方框</p>
<p>github下载 activiti-6.0.0 源码解压并使用IDEA 导入</p>
<p>定位 activiti-6.0.0\modules\activiti-image-generator\src\main\java\org\activitiℑ\impl\DefaultProcessDiagramCanvas.java</p>
<p>如下图修改字体，然后重新打包成 <a href="https://github.com/emacle/php-activiti-api/blob/master/doc/activiti-image-generator-6.0.0.jar">activiti-image-generator-6.0.0.jar</a>
<a href="/ox-hugo/work.org_20200506_081933.png"><img src="/ox-hugo/work.org_20200506_081933.png" alt=""></a></p>
<p>替换apache-tomcat-9.0.30\webapps\activiti-rest\WEB-INF\lib中旧jar包, 效果如下
<a href="/ox-hugo/Snipaste_2020-05-05_19-25-12.png"><img src="/ox-hugo/Snipaste_2020-05-05_19-25-12.png" alt=""></a></p>
 </div>
    <footer class="post-footer">

  <div class="post-footer-data">
            
<div class="tags">
  
    
      <div class="tag">
        <a href="/tags/activiti">#activiti</a>
      </div>
    
  
</div>

	    
	    
	    <div class="date"> Tue, 05 May 2020 21:55:00 CST </div>

    
  </div>
</footer>
    
    
    
    

  
  

<script src="https://utteranc.es/client.js"
        repo="emacle/utterances"
        issue-term="pathname"
        theme="github-dark"
	label="hugo"
        crossorigin="anonymous"
        async>
</script>




</article>

  <footer>

  <div class="social-links-footer">

  

  
  <a href="https://github.com/emacle" target="_blank"><div class="social-link">GitHub</div></a>
  

  <span id="busuanzi_container_site_uv" style="display:none">
    <span id="busuanzi_value_site_uv"></span>
  </span>

  

  

  

  <div class="social-link">
  <a href="/index.xml" target="_blank">RSS</a>
  </div>
  <span id="busuanzi_container_site_pv" style="display:none">
    <span id="busuanzi_value_site_pv"></span> | <span id="busuanzi_value_page_pv"></span>
  </span>

</div>


  <div class="copyright">  </div>

  
  
  

  
  <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

</div> 

</body>
</html>

